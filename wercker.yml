# docker box definition
box: java

# defining the dev pipeline
#

flywaymigrate:
    steps:
      - script:
          name: Migrate DB using Flyway
          code: |
             ./gradlew migrateDB -PdbUrl=jdbc:mysql://google/fgcart?cloudSqlInstance=marine-shell-158521:us-east1:fg-db&socketFactory=com.google.cloud.sql.mysql.SocketFactory&&useSSL=true
build:
  steps:
    - script:
        name: Build
        code: |
           ./gradlew --project-cache-dir=$WERCKER_CACHE_DIR build -x test

runtests:
   steps:
    - script:
        name: gradletest
        code: |
           ./gradlew --project-cache-dir=$WERCKER_CACHE_DIR build -PspringProfiles=gcp

#deploytodev:
#  steps:
#    - script:
#      name: gradle bootRun
#      code: |
#        ./gradlew bootRun
